(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{209:function(e,a,t){"use strict";t.r(a);var v=t(28),l=Object(v.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"内存错误之-slide-计算"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#内存错误之-slide-计算"}},[e._v("#")]),e._v(" 内存错误之 Slide 计算")]),e._v(" "),t("p",[e._v("KASLR (Kernel Address Space Layout Randomization)：内核地址空间布局随机化，是 "),t("code",[e._v("macOS")]),e._v(" 所使用的一项内存管理技术，它会在内存基址上加一个 "),t("code",[e._v("Slide")]),e._v(" 值，用于保护内核安全。")]),e._v(" "),t("blockquote",[t("p",[t("code",[e._v("Slide")]),e._v(" 的有效范围是 8 - 255，转化为 16 进制就是 8 - FF ，乘 200000（16 进制）得出的内存基址 "),t("code",[e._v("Start")]),e._v(" 范围为 1000000 - 1FE00000")])]),e._v(" "),t("p",[e._v("我们通常说的内存错误指的是引导过程马上卡住并出现了下列错误代码，大部分情况下可以通过更换内存补丁解决。但在一些台式机上，有时候换内存补丁也无法解决，由于台式机硬件自由度高，内存补丁可能无法根据我们的硬件正确的修复内存问题，这个时候就需要计算 "),t("code",[e._v("Slide")]),e._v(" 值来启用 "),t("code",[e._v("KASLR")]),e._v(" 内存管理技术了。")]),e._v(" "),t("div",{staticClass:"language-Shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("Error allocating 0x0x116F6 pages at 0x00000000093eb000 alloc "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("type")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),e._v("\n")])])]),t("p",[e._v("注意上述代码中的 0x116F6，是出错的 "),t("code",[e._v("Page")]),e._v(" 值，接下来我们将利用这个值来确定需要提供给 "),t("code",[e._v("KASLR")]),e._v(" 的内存基址 "),t("code",[e._v("Start")]),e._v(" 的值")]),e._v(" "),t("p",[e._v("进入 "),t("code",[e._v("clover")]),e._v("，打开 "),t("code",[e._v("UEFI Shell 64")]),e._v(" 界面，输入 "),t("code",[e._v("memmap -b")]),e._v("，找到第一个 "),t("code",[e._v("Start")]),e._v(" 大于 1000000（对应 "),t("code",[e._v("Slide")]),e._v(" 最小值 8）且 "),t("code",[e._v("Page")]),e._v(" 值大于 0x116F6 （出错的 "),t("code",[e._v("Page")]),e._v(" 值） 的 "),t("code",[e._v("Available")]),e._v(" 类型数据，如下所示")]),e._v(" "),t("div",{staticClass:"language-Shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[e._v("Available 00000000 1000B000 00000000 5F04FFFF 00000000 0004F045 00000000 0000000F\n")])])]),t("p",[e._v("可见 1000B000 在这个范围内，使用十六进制计算器用这个值除 200000（16 进制）得出的值转为十进制向上取整即可")]),e._v(" "),t("p",[e._v("例如 1000B000（十六进制）/ 200000（十六进制）= 128.02（十进制）向上取整为 129，接下来我们将 "),t("code",[e._v("slide=129")]),e._v(" 添加到引导参数中，问题基本上都能解决")]),e._v(" "),t("p",[e._v("在线十六进制计算器："),t("a",{attrs:{href:"http://www.99cankao.com/digital-computation/hex-calculator.php",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://www.99cankao.com/digital-computation/hex-calculator.php"),t("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=l.exports}}]);